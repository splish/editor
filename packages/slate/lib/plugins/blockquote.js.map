{"version":3,"sources":["../../src/plugins/blockquote.js"],"names":["BLOCKQUOTE","BlockquotePlugin","props","Button","editorState","onChange","onClick","e","preventDefault","isActive","blocks","some","Boolean","document","getClosest","block","key","parent","type","transform","unwrapBlock","wrapBlock","apply","name","nodes","plugins","typeDefault","DEFAULT_NODE","toolbarButtons","deserialize","el","next","tagName","toLowerCase","kind","childNodes","serialize","object","children","textAlign","data","get"],"mappings":";;;;;;;AAuBA;;;;AACA;;;;AACA;;;;AAEA;;AACA;;;;;;;;;;;;+eA5BA;;;;;;;;;;;;;;;;;;;;;;AAsBA;;;AASO,IAAMA,kCAAa,uBAAnB;;IAEcC,gB;;;AACnB,4BAAYC,KAAZ,EAA0B;AAAA;;AAAA,oIAClBA,KADkB;;AAAA,UAO1BC,MAP0B,GAOjB,gBAAsC;AAAA,UAAnCC,WAAmC,QAAnCA,WAAmC;AAAA,UAAtBC,QAAsB,QAAtBA,QAAsB;;AAC7C,UAAMC,UAAU,SAAVA,OAAU,IAAK;AACnBC,UAAEC,cAAF;;AAEA,YAAMC,WAAWL,YAAYM,MAAZ,CAAmBC,IAAnB,CAAwB;AAAA,iBACvCC,QACER,YAAYS,QAAZ,CAAqBC,UAArB,CACEC,MAAMC,GADR,EAEE;AAAA,mBAAUC,OAAOC,IAAP,KAAgBlB,UAA1B;AAAA,WAFF,CADF,CADuC;AAAA,SAAxB,CAAjB;;AASA,YAAImB,YAAYf,YAAYe,SAAZ,EAAhB;;AAEA,YAAIV,QAAJ,EAAc;AACZU,sBAAYA,UAAUC,WAAV,CAAsBpB,UAAtB,CAAZ;AACD,SAFD,MAEO;AACLmB,sBAAYA,UAAUE,SAAV,CAAoBrB,UAApB,CAAZ;AACD;;AAEDK,iBAASc,UAAUG,KAAV,EAAT;AACD,OArBD;;AAuBA,UAAMb,WAAWL,YAAYM,MAAZ,CAAmBC,IAAnB,CAAwB;AAAA,eACvCC,QACER,YAAYS,QAAZ,CAAqBC,UAArB,CACEC,MAAMC,GADR,EAEE;AAAA,iBAAUC,OAAOC,IAAP,KAAgBlB,UAA1B;AAAA,SAFF,CADF,CADuC;AAAA,OAAxB,CAAjB;;AASA,aACE;AACE,iBAASM,OADX;AAEE,kBAAUG,QAFZ;AAGE,cAAM;AAHR,QADF;AAOD,KA/CyB;;AAAA,UAiD1Bc,IAjD0B,GAiDnB,YAjDmB;AAAA,UAmD1BC,KAnD0B,uBAoDvBxB,UApDuB,EAoDV,0BAAY,YAAZ,CApDU;AAAA,UAuD1ByB,OAvD0B,GAuDhB,CACR,mCAAuB;AACrBP,YAAMlB,UADe;AAErB0B,mBAAa,MAAKC;AAFG,KAAvB,CADQ,CAvDgB;AAAA,UA8D1BC,cA9D0B,GA8DT,CAAC,MAAKzB,MAAN,CA9DS;;AAAA,UAgE1B0B,WAhE0B,GAgEZ,UAACC,EAAD,EAAKC,IAAL,EAAc;AAC1B,cAAQD,GAAGE,OAAH,CAAWC,WAAX,EAAR;AACE,aAAK,YAAL;AACE,iBAAO;AACLC,kBAAM,OADD;AAELhB,kBAAMlB,UAFD;AAGLwB,mBAAOO,KAAKD,GAAGK,UAAR;AAHF,WAAP;AAFJ;AAQD,KAzEyB;;AAAA,UA2E1BC,SA3E0B,GA2Ed,UACVC,MADU,EAEVC,QAFU,EAGP;AACH,UAAID,OAAOH,IAAP,KAAgB,OAApB,EAA6B;AAC3B;AACD;AACD,cAAQG,OAAOnB,IAAf;AACE,aAAKlB,UAAL;AACE,iBACE;AAAA;AAAA,cAAY,OAAO,EAAEuC,WAAWF,OAAOG,IAAP,CAAYC,GAAZ,CAAgB,OAAhB,CAAb,EAAnB;AACGH;AADH,WADF;AAFJ;AAQD,KA1FyB;;AAGxB,UAAKX,YAAL,GAAoBzB,MAAMyB,YAA1B;AAHwB;AAIzB;;AAED;;;;;;kBAPmB1B,gB","file":"blockquote.js","sourcesContent":["/*\n * This file is part of ORY Editor.\n *\n * ORY Editor is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Lesser General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *  \n * ORY Editor is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Lesser General Public License for more details.\n *  \n * You should have received a copy of the GNU Lesser General Public License\n * along with ORY Editor.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @license LGPL-3.0\n * @copyright 2016-2018 Aeneas Rekkas\n * @author Aeneas Rekkas <aeneas+oss@aeneas.io>\n *\n */\n\n/* eslint-disable prefer-reflect, default-case, react/display-name */\nimport BlockquoteIcon from 'material-ui/svg-icons/editor/format-quote'\nimport React from 'react'\nimport createBlockquotePlugin from 'slate-edit-blockquote'\n\nimport { makeTagNode, ToolbarButton } from '../helpers'\nimport Plugin from './Plugin'\nimport type { Props } from './props'\n\nexport const BLOCKQUOTE = 'BLOCKQUOTE/BLOCKQUOTE'\n\nexport default class BlockquotePlugin extends Plugin {\n  constructor(props: Props) {\n    super(props)\n\n    this.DEFAULT_NODE = props.DEFAULT_NODE\n  }\n\n  // eslint-disable-next-line react/display-name\n  Button = ({ editorState, onChange }: Props) => {\n    const onClick = e => {\n      e.preventDefault()\n\n      const isActive = editorState.blocks.some(block =>\n        Boolean(\n          editorState.document.getClosest(\n            block.key,\n            parent => parent.type === BLOCKQUOTE\n          )\n        )\n      )\n\n      let transform = editorState.transform()\n\n      if (isActive) {\n        transform = transform.unwrapBlock(BLOCKQUOTE)\n      } else {\n        transform = transform.wrapBlock(BLOCKQUOTE)\n      }\n\n      onChange(transform.apply())\n    }\n\n    const isActive = editorState.blocks.some(block =>\n      Boolean(\n        editorState.document.getClosest(\n          block.key,\n          parent => parent.type === BLOCKQUOTE\n        )\n      )\n    )\n\n    return (\n      <ToolbarButton\n        onClick={onClick}\n        isActive={isActive}\n        icon={<BlockquoteIcon />}\n      />\n    )\n  }\n\n  name = 'blockquote'\n\n  nodes = {\n    [BLOCKQUOTE]: makeTagNode('blockquote')\n  }\n\n  plugins = [\n    createBlockquotePlugin({\n      type: BLOCKQUOTE,\n      typeDefault: this.DEFAULT_NODE\n    })\n  ]\n\n  toolbarButtons = [this.Button]\n\n  deserialize = (el, next) => {\n    switch (el.tagName.toLowerCase()) {\n      case 'blockquote':\n        return {\n          kind: 'block',\n          type: BLOCKQUOTE,\n          nodes: next(el.childNodes)\n        }\n    }\n  }\n\n  serialize = (\n    object: { type: string, kind: string, data: any },\n    children: any[]\n  ) => {\n    if (object.kind !== 'block') {\n      return\n    }\n    switch (object.type) {\n      case BLOCKQUOTE:\n        return (\n          <blockquote style={{ textAlign: object.data.get('align') }}>\n            {children}\n          </blockquote>\n        )\n    }\n  }\n}\n"]}