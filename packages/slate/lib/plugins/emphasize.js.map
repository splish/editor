{"version":3,"sources":["../../src/plugins/emphasize.js"],"names":["STRONG","EM","U","createButton","type","icon","editorState","onChange","onClick","e","preventDefault","transform","toggleMark","apply","isActive","marks","some","mark","EmphasizePlugin","name","onKeyDown","data","state","isMod","key","hoverButtons","deserialize","el","next","tagName","toLowerCase","kind","nodes","childNodes","serialize","object","children"],"mappings":";;;;;;;AAuBA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;;;;;;;;;+eA5BA;;;;;;;;;;;;;;;;;;;;;;AAsBA;;;AASO,IAAMA,0BAAS,kBAAf;AACA,IAAMC,kBAAK,cAAX;AACA,IAAMC,gBAAI,aAAV;;AAEP;AACA,IAAMC,eAAe,SAAfA,YAAe,CAACC,IAAD,EAAOC,IAAP;AAAA,SAAgB,gBAAsC;AAAA,QAAnCC,WAAmC,QAAnCA,WAAmC;AAAA,QAAtBC,QAAsB,QAAtBA,QAAsB;;AACzE,QAAMC,UAAU,SAAVA,OAAU,IAAK;AACnBC,QAAEC,cAAF;;AAEAH,eACED,YACGK,SADH,GAEGC,UAFH,CAEcR,IAFd,EAGGS,KAHH,EADF;AAMD,KATD;;AAWA,QAAMC,WACJR,eAAeA,YAAYS,KAAZ,CAAkBC,IAAlB,CAAuB;AAAA,aAAQC,KAAKb,IAAL,KAAcA,IAAtB;AAAA,KAAvB,CADjB;;AAGA,WAAO,wDAAe,SAASI,OAAxB,EAAiC,UAAUM,QAA3C,EAAqD,MAAMT,IAA3D,GAAP;AACD,GAhBoB;AAAA,CAArB;;IAkBqBa,e;;;;;;;;;;;;;;0MAGnBC,I,GAAO,W,QAEPJ,K,mDACGf,M,EAAS,0BAAY,QAAZ,C,gCACTC,E,EAAK,0BAAY,IAAZ,C,gCACLC,C,EAAI,0BAAY,GAAZ,C,uBAGPkB,S,GAAY,UAACX,CAAD,EAAWY,IAAX,EAAkDC,KAAlD,EAA4D;AACtE,UAAID,KAAKE,KAAT,EAAgB;AACd,YAAIN,aAAJ;;AAEA,gBAAQI,KAAKG,GAAb;AACE,eAAK,GAAL;AACEP,mBAAOjB,MAAP;AACA;AACF,eAAK,GAAL;AACEiB,mBAAOhB,EAAP;AACA;AACF,eAAK,GAAL;AACEgB,mBAAOf,CAAP;AACA;AACF;AACE;AAXJ;;AAcA,eAAOoB,MACJX,SADI,GAEJC,UAFI,CAEOK,IAFP,EAGJJ,KAHI,EAAP;AAID;AACF,K,QAEDY,Y,GAAe,CACbtB,aAAaH,MAAb,EAAqB,yDAArB,CADa,EAEbG,aAAaF,EAAb,EAAiB,2DAAjB,CAFa,EAGbE,aAAaD,CAAb,EAAgB,+DAAhB,CAHa,C,QAMfwB,W,GAAc,UAACC,EAAD,EAAKC,IAAL,EAAc;AAC1B,cAAQD,GAAGE,OAAH,CAAWC,WAAX,EAAR;AACE,aAAK,QAAL;AACA,aAAK,GAAL;AACE,iBAAO;AACLC,kBAAM,MADD;AAEL3B,kBAAMJ,MAFD;AAGLgC,mBAAOJ,KAAKD,GAAGM,UAAR;AAHF,WAAP;AAKF,aAAK,IAAL;AACA,aAAK,GAAL;AACE,iBAAO;AACLF,kBAAM,MADD;AAEL3B,kBAAMH,EAFD;AAGL+B,mBAAOJ,KAAKD,GAAGM,UAAR;AAHF,WAAP;AAKF,aAAK,GAAL;AACE,iBAAO;AACLF,kBAAM,MADD;AAEL3B,kBAAMF,CAFD;AAGL8B,mBAAOJ,KAAKD,GAAGM,UAAR;AAHF,WAAP;AAhBJ;AAsBD,K,QAEDC,S,GAAY,UAACC,MAAD,EAAyCC,QAAzC,EAA6D;AACvE,UAAID,OAAOJ,IAAP,KAAgB,MAApB,EAA4B;AAC1B;AACD;AACD,cAAQI,OAAO/B,IAAf;AACE,aAAKJ,MAAL;AACE,iBAAO;AAAA;AAAA;AAASoC;AAAT,WAAP;AACF,aAAKnC,EAAL;AACE,iBAAO;AAAA;AAAA;AAAKmC;AAAL,WAAP;AACF,aAAKlC,CAAL;AACE,iBAAO;AAAA;AAAA;AAAIkC;AAAJ,WAAP;AANJ;AAQD,K;;;;;;kBA/EkBlB,e","file":"emphasize.js","sourcesContent":["/*\n * This file is part of ORY Editor.\n *\n * ORY Editor is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Lesser General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *  \n * ORY Editor is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Lesser General Public License for more details.\n *  \n * You should have received a copy of the GNU Lesser General Public License\n * along with ORY Editor.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @license LGPL-3.0\n * @copyright 2016-2018 Aeneas Rekkas\n * @author Aeneas Rekkas <aeneas+oss@aeneas.io>\n *\n */\n\n/* eslint-disable prefer-reflect, default-case, react/display-name */\nimport React from 'react'\nimport BoldIcon from 'material-ui/svg-icons/editor/format-bold'\nimport ItalicIcon from 'material-ui/svg-icons/editor/format-italic'\nimport UnderlinedIcon from 'material-ui/svg-icons/editor/format-underlined'\nimport { makeTagMark, ToolbarButton } from '../helpers'\nimport Plugin from './Plugin'\nimport type { Props } from './props'\n\nexport const STRONG = 'EMPHASIZE/STRONG'\nexport const EM = 'EMPHASIZE/EM'\nexport const U = 'EMPHASIZE/U'\n\n// eslint-disable-next-line react/display-name\nconst createButton = (type, icon) => ({ editorState, onChange }: Props) => {\n  const onClick = e => {\n    e.preventDefault()\n\n    onChange(\n      editorState\n        .transform()\n        .toggleMark(type)\n        .apply()\n    )\n  }\n\n  const isActive =\n    editorState && editorState.marks.some(mark => mark.type === type)\n\n  return <ToolbarButton onClick={onClick} isActive={isActive} icon={icon} />\n}\n\nexport default class EmphasizePlugin extends Plugin {\n  props: Props\n\n  name = 'emphasize'\n\n  marks = {\n    [STRONG]: makeTagMark('strong'),\n    [EM]: makeTagMark('em'),\n    [U]: makeTagMark('u')\n  }\n\n  onKeyDown = (e: Event, data: { key: string, isMod: boolean }, state) => {\n    if (data.isMod) {\n      let mark\n\n      switch (data.key) {\n        case 'b':\n          mark = STRONG\n          break\n        case 'i':\n          mark = EM\n          break\n        case 'u':\n          mark = U\n          break\n        default:\n          return\n      }\n\n      return state\n        .transform()\n        .toggleMark(mark)\n        .apply()\n    }\n  }\n\n  hoverButtons = [\n    createButton(STRONG, <BoldIcon />),\n    createButton(EM, <ItalicIcon />),\n    createButton(U, <UnderlinedIcon />)\n  ]\n\n  deserialize = (el, next) => {\n    switch (el.tagName.toLowerCase()) {\n      case 'strong':\n      case 'b':\n        return {\n          kind: 'mark',\n          type: STRONG,\n          nodes: next(el.childNodes)\n        }\n      case 'em':\n      case 'i':\n        return {\n          kind: 'mark',\n          type: EM,\n          nodes: next(el.childNodes)\n        }\n      case 'u':\n        return {\n          kind: 'mark',\n          type: U,\n          nodes: next(el.childNodes)\n        }\n    }\n  }\n\n  serialize = (object: { type: string, kind: string }, children: any[]) => {\n    if (object.kind !== 'mark') {\n      return\n    }\n    switch (object.type) {\n      case STRONG:\n        return <strong>{children}</strong>\n      case EM:\n        return <em>{children}</em>\n      case U:\n        return <u>{children}</u>\n    }\n  }\n}\n"]}